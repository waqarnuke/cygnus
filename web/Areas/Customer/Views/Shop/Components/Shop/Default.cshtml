 @model Web.ViewModel.ShopVM
@* <div>
    @if(Model.PageNo >= 1)
    {
        <button id="perBtn" class="pageButton" data-pageNo = @(Model.PageNo - 1 )>Privious</button>
    }
    
    <button id="nxtBtn" class="pageButton" data-pageNo = @(Model.PageNo + 1 )>Next</button>
</div> *@
<div>
    @if(Model.Pager != null)
    {
        if(Model.Pager.CurrentPage > 1)
        {
            <button  class="pageButton" data-pageNo = "1">First</button>
            <button  class="pageButton" data-pageNo = "@Model.Pager.CurrentPage - 1" >Privious</button>
        }
        
        for(var pageNo = Model.Pager.StartPage; pageNo <= Model.Pager.EndPage; pageNo++)
        {
            <button  class="pageButton" data-pageNo = "@pageNo" >@pageNo</button>
        }
        
        if(Model.Pager.CurrentPage < Model.Pager.TotalPages)
        {
            <button  class="pageButton" data-pageNo = "@Model.Pager.CurrentPage + 1" >Next</button>
            <button  class="pageButton" data-pageNo = "@Model.Pager.EndPage">Last</button>
        }
        
    }
    
</div>
<div class="row pb-5">
    @if(Model.Products != null && Model.Products.Count() > 0)
    {
        @foreach(var item in Model.Products)
        {
                <div class="col-lg-3 col-sm-6">
                    <div class="row p-2">
                        <div class="col-12 p-1">
                            <div class="card border-0 p-3 shadow border-top border-5 rounded">
                                <img src="@item.ImageUrl" class="card-img-top rounded" alt="" >
                                <div class="card-body pb-0">
                                    <div class="pl-1">
                                        <p class="card-title h5 text-dark opacity-75 text-upercase text-center">@item.Title</p>
                                        <p class="card-title text-warning text-center">@item.Author</p>
                                    </div>
                                    <div class="pl-1">
                                        <p class="text-dark opacity-75 text-center mb-0">
                                            List Price: 
                                            <span class="text-decoration-line-through">
                                                @item.ListPrice.ToString("c")
                                            </span> 
                                        </p>
                                    </div>
                                    <div class="pl-1">
                                        <p class="text-dark opacity-75 text-center">
                                            As low as: 
                                            <span>
                                                @item.Price100.ToString("c")
                                            </span> 
                                        </p>
                                    </div>
                                </div>
                                <div>
                                    <a asp-action="Details" asp-route-productId="@item.Id" class="btn btn-primary bg-gradient border-0 from-control">
                                        Details
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        }
    }
    else
    {
        <div>
            <span>No product found</span>
        </div>
    }
</div>

<script>
        $(".pageButton").click(function(){        
        var searchValue = $("#textSearch").val();
        $.ajax({
            url:'/Customer/Shop/GetNewList',
            data:{
                pageNo : $(this).attr("data-pageNo"),
                search : searchValue
            }
        })
        .done(function(response){
        $("#tableContainer").html(response);
        })
        .fail(function(XMLHttpRequest, textSearch, errorThrown) {
            alert("fail")
        });

    });


</script>